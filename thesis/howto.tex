\chapter{Using software}

We will not provide an entire architecture of our program since it awaits an extensive reconstruction in the near future. In this appendix, we explain some of its functionalities instead.

\begin{comment}

\section{Python script}
\label{sec:code}

This appendix intends to explain to the reader how to use the python script. The program starts by running the \verb|main.py| file. In this file there are definition of function which uses more complex functionalities from the other modules. When running the \verb|main.py| one should uncomment all the lines he/she want to be executed (see \ref{lst:main}).

\xxx{This is an example code.}

\begin{Verbatim}
def StepVerlet(ODESystem, rv, t, dt, aCoulomb, mass, charge, trapParams):

    r, v = rv
    v, a = ODESystem(rv, t, aCoulomb, mass, charge, trapParams)
    
    r1 = r + v * dt + 0.5 * a * dt**2
    
    a1 = ODESystem(np.array([r1, v]), t, aCoulomb, mass, charge, trapParams)[1]    
    
    v1 = v + 0.5 * (a + a1) * dt
    t1 = t + dt
    
    rv1 = np.array([r1, v1])
    
    return rv1, t1   
\end{Verbatim}


\begin{listing}
\begin{lstlisting}
if __name__ == '__main__':
    
    prayForItToWork()
	    
\end{lstlisting}
\caption{Main program.}
\label{lst:main}
\end{listing}


\begin{listing}[H]
\begin{lstlisting}
	def ODESystemEffectiveDamping(rv, aCoulomb, mass, charge, trapParams):

    if (mass == electronMass):        
        a, q1, q2 = trapParams
        q1 = 0
    else:
        a, q1, q2 = trapParams * (electronMass / mass)
    
	    
    # unpacking position and velocity components
    r, v = rv
    x,y,z = r
    vx,vy,vz = v
    
    # defining the system of first order ODEs
    x1 = vx
    vx1 = aCoulomb[0] - x / 4 * (a + 2 * q1**2 / 2 * (f2 / f1)**2 
    	+ q2**2 / 2) - 2 * beta * vx
    
    y1 = vy
    vy1 = aCoulomb[1] - y / 4 * (a + 2 * q1**2 / 2 * (f2 / f1)**2 
    	+ q2**2 / 2) - 2 * beta * vy
    
    z1 = vz
    vz1 = aCoulomb[2] - z / 2 * (a + 2 * q1**2 / 2 * (f2 / f1)**2 
    	+ q2**2 / 2) - 2 * beta * vz
    
	# defining derivatives of position and velocity 
    r1 = np.array([x1, y1, z1])
    v1 = np.array([vx1, vy1, vz1])

    return np.array([r1, v1])	    
\end{lstlisting}
\caption{The system of ODEs used for simulating Coulomb crystal.}
\label{lst:crystal}
\end{listing} 

\end{comment}